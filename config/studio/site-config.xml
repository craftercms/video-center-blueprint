<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ MIT License
  ~
  ~ Copyright (c) 2018-2019 Crafter Software Corporation. All Rights Reserved.
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all
  ~ copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  ~ SOFTWARE.
  -->

<!-- site-config.xml

    This contains the primary site configuration.

-->
<site-config>
  <version>8</version>
  <wem-project>{siteName}</wem-project>
  <display-name>{siteName}</display-name>

  <!--
  Specifies the regular expression patterns to match content type field
  names that require CDATA escaping.
  -->
  <cdata-escaped-field-patterns>
    <pattern>(_html|_t|_s|_smv|mvs)$</pattern>
    <pattern>internal-name</pattern>
  </cdata-escaped-field-patterns>

  <locale>
    <!--
    BCP 47 language tag or unicode extension (e.g. "en-US-u-ca-buddhist").
    Leave empty — but do not remove — for using the user's browser locale.
    -->
    <localeCode>en-US</localeCode>
    <!--
    For full list of options and docs, visit
    https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat
    Remove the `timeZone` element all together to default to the users's time zone.
    -->
    <dateTimeFormatOptions>
      <timeZone>EST5EDT</timeZone>
      <day>numeric</day>
      <month>numeric</month>
      <year>numeric</year>
      <hour>numeric</hour>
      <minute>numeric</minute>
      <hour12>true</hour12>
    </dateTimeFormatOptions>
  </locale>

  <published-repository>
    <enable-staging-environment>false</enable-staging-environment>
  </published-repository>
  <publishing>
    <comments>
      <!-- Global setting would apply to all -->
      <required>false</required>
      <!-- Additional (also optional) specific overrides -->
      <!-- <delete-required/> -->
      <!-- <bulk-publish-required/> -->
      <!-- <publish-by-commit-required/> -->
    </comments>
  </publishing>
  <form-engine>
    <field-name-postfix>true</field-name-postfix>
    <ignore-postfix-fields>
      <field>internal-name</field>
      <field>file-name</field>
      <field>placeInNav</field>
      <field>scripts</field>
      <field>mime-type</field>
      <field>force-https</field>
      <field>navLabel</field>
      <field>expired</field>
      <field>key</field>
      <field>value</field>
      <field>items</field>
      <field>redirect-url</field>
      <field>authorizedRoles</field>
      <field>role</field>
      <field>disabled</field>
    </ignore-postfix-fields>
  </form-engine>
  <!--
        Pattern that Studio will use to load plugin from the site repository
        Required placeholders: ${type}, ${name}
     -->
  <plugin-folder-pattern>/config/studio/plugins/${type}/${name}</plugin-folder-pattern>
  <repository rootPrefix="/site">
    <!-- default inheritance file name -->
    <level-descriptor>crafter-level-descriptor.level.xml</level-descriptor>
    <!-- The section below classifies items into folders for two dashboard widgets:
        - Items Waiting For Approval
        - Approved Scheduled Items

        Items that match the paths specified will be grouped together in the dashboard widget
        -->
    <folders>
      <folder name="Pages" path="/website" read-direct-children="false" attach-root-prefix="true"/>
      <folder name="Components" path="/components" read-direct-children="false" attach-root-prefix="true"/>
      <folder name="Assets" path="/static-assets" read-direct-children="false" attach-root-prefix="false"/>
      <folder name="Templates" path="/templates" read-direct-children="false" attach-root-prefix="false"/>
      <folder name="Videos" path="/site/videos" read-direct-children="false" attach-root-prefix="false"/>
      <folder name="Streams" path="/site/streams" read-direct-children="false" attach-root-prefix="false"/>
      <folder name="Origins" path="/site/origins" read-direct-children="false" attach-root-prefix="false"/>
    </folders>
    <!-- Item Patterns -->
    <patterns>
      <!-- The section below helps determine the type of content based on regex. This shows up in two places:
            - The activity audit log.
            - The UI icon used for the item
            -->
      <pattern-group name="page">
        <pattern>/site/website/([^&lt;]+)\.xml</pattern>
      </pattern-group>
      <pattern-group name="component">
        <pattern>/site/components/([^&lt;]+)\.xml</pattern>
        <pattern>/site/system/page-components/([^&lt;]+)\.xml</pattern>
        <pattern>/site/component-bindings/([^&lt;]+)\.xml</pattern>
        <pattern>/site/indexes/([^&lt;]+)\.xml</pattern>
        <pattern>/site/resources/([^&lt;]+)\.xml</pattern>
        <pattern>/site/videos/([^&lt;]+)\.xml</pattern>
        <pattern>/site/streams/([^&lt;]+)\.xml</pattern>
        <pattern>/site/origins/([^&lt;]+)\.xml</pattern>
      </pattern-group>
      <pattern-group name="asset">
        <pattern>/static-assets/([^&lt;"'\)]+)</pattern>
      </pattern-group>
      <pattern-group name="rendering-template">
        <pattern>/templates/([^&lt;"]+)\.ftl</pattern>
      </pattern-group>
      <pattern-group name="scripts">
        <pattern>/scripts/([^&lt;"]+)\.groovy</pattern>
      </pattern-group>
      <!-- The section below enumerates the mime-types we can preview -->
      <pattern-group name="previewable-mimetypes">
        <pattern>image/(.*)</pattern>
        <pattern>application/pdf</pattern>
        <pattern>video/(.*)</pattern>
        <pattern>application/msword</pattern>
        <pattern>application/vnd.openxmlformats-officedocument.wordprocessingml.document</pattern>
        <pattern>application/vnd.ms-excel</pattern>
        <pattern>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</pattern>
        <pattern>application/vnd.ms-powerpoint</pattern>
      </pattern-group>
    </patterns>
    <!-- The patterns below identify what is allowed to show up in the Dashboard widgets -->
    <display-in-widget-patterns>
      <display-in-widget-pattern>.*</display-in-widget-pattern>
    </display-in-widget-patterns>
  </repository>
  <contentMonitoring>
    <monitor>
      <name>Content Expiring Tomorrow</name>
      <query>expired_dt:[now+1d/d TO now+2d/d]</query>
      <paths>
        <path>
          <name>All Site</name>
          <pattern>/site/.*</pattern>
          <emailTemplate>contentExpiringSoon</emailTemplate>
          <emails>admin@example.com</emails>
          <locale>en</locale>
        </path>
      </paths>
    </monitor>
    <monitor>
      <name>Content Expiring In One Week</name>
      <query>expired_dt:[now+7d/d TO now+8d/d]</query>
      <paths>
        <path>
          <name>All Site</name>
          <pattern>/site/.*</pattern>
          <emailTemplate>contentExpiringSoon</emailTemplate>
          <emails>admin@example.com</emails>
          <locale>en</locale>
        </path>
      </paths>
    </monitor>
    <monitor>
      <name>Content Expiring In One Month</name>
      <query>expired_dt:[now+30d/d TO now+32d/d]</query>
      <paths>
        <path>
          <name>All Site</name>
          <pattern>/site/.*</pattern>
          <emailTemplate>contentExpiringSoon</emailTemplate>
          <emails>admin@example.com</emails>
          <locale>en</locale>
        </path>
      </paths>
    </monitor>
    <monitor>
      <name>Content Expiring In Two Months</name>
      <query>expired_dt:[now+60d/d TO now+62d/d]</query>
      <paths>
        <path>
          <name>All Site</name>
          <pattern>/site/.*</pattern>
          <emailTemplate>contentExpiringSoon</emailTemplate>
          <emails>admin@example.com</emails>
          <locale>en</locale>
        </path>
      </paths>
    </monitor>
  </contentMonitoring>
  <site-urls>
    <authoring-url/>
    <staging-url/>
    <live-url/>
  </site-urls>
  <!--
Prevent deleting, renaming or cutting root folders of sidebar
-->
  <protected-folders-patterns>
    <pattern>^/([^ !$`&amp;*()/+]|(\\[ !$`&amp;*()+]))+$</pattern>
  </protected-folders-patterns>
</site-config>
